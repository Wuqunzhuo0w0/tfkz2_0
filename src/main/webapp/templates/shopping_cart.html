<!DOCTYPE HTML>
<html>
<!-- Added by HTTrack --><meta http-equiv="content-type" content="text/html;charset=utf-8" /><!-- /Added by HTTrack -->
<head>
  <meta charset="UTF-8">
  <meta name="keywords" content="同福客栈，同福客栈酒水，东软睿道同福客栈">

  <title>购物车</title>
  <link href="../css/cart/style.css" media="screen" rel="stylesheet" type="text/css">
  <link href="../css/cart/grid.css"css/grid.css"" media="screen" rel="stylesheet" type="text/css">

  <script src="../js/cart/jquery-1.7.2.min.js" ></script>
  <script src="../js/cart/html5.js" ></script>
  <script src="../js/cart/jflow.plus.js" ></script>
  <script src="../js/cart/jquery.carouFredSel-5.2.2-packed.js"></script>
  <script src="../js/cart/checkbox.js"></script>
  <script src="../js/cart/radio.js"></script>
  <script src="../js/cart/selectBox.js"></script>
  <script src="../js/cart/jquery.jqzoom-core.js" ></script>

  <script>
       $(document).ready(function(){
	      $("#myController").jFlow({
		     controller: ".control", // must be class, use . sign
		     slideWrapper : "#jFlowSlider", // must be id, use # sign
		     slides: "#slider",  // the div where all your sliding divs are nested in
		     selectedWrapper: "jFlowSelected",  // just pure text, no sign
		     width: "984px",  // this is the width for the content-slider
		     height: "480px",  // this is the height for the content-slider
		     duration: 400,  // time in miliseconds to transition one slide
		     prev: ".slidprev", // must be class, use . sign
		     next: ".slidnext", // must be class, use . sign
		     auto: true
	      });
       });
  </script>
  <script>
       $(function() {
	  $('#list_product').carouFredSel({
		prev: '#prev_c1',
		next: '#next_c1',
		auto: false
	  });
          $('#list_product2').carouFredSel({
		prev: '#prev_c2',
		next: '#next_c2',
		auto: false
	  });
	  $(window).resize();
	});
  </script>
  <script>
       $(document).ready(function(){
	      $("button").click(function(){
		     $(this).addClass('click')
	      });
       })
  </script>
  <script>
       $(document).ready(function() {
	      $("select").selectBox();
       });
  </script>

</head>
<body>
  <div class="container_12"> <!-- #top -->
    <header id="branding">
      <div class="grid_3">
        <hgroup>
          <h1 id="site_logo" ><a href="main.html"><img src="../images/logo.png" alt="Online Store Theme Logo"/></a></h1>
        </hgroup>
      </div><!-- .grid_3 -->
      <div class="grid_3">
        <form class="search">
          <input type="text" name="search" class="entry_form" value="" placeholder="输入物品名称"/>
	</form>
      </div><!-- .grid_3 -->

      <div class="grid_6">
        <ul id="cart_nav">
          <li>
            <a class="cart_li" href="">购物车</a>
            <ul class="cart_cont">
              <li class="no_border"><p>最近添加的商品</p></li>
              <li>
                <a href="product_page.html" class="prev_cart"><div class="cart_vert"><img src="../images/科罗娜.jpg" alt="" title="" /></div></a>
                <div class="cont_cart">
                  <h4>科罗娜</h4>
                  <div class="price">1 x ¥168.00</div>
                </div>
                <a title="close" class="close" href="#"></a>
                <div class="clear"></div>
              </li>
              
              <li>
                <a href="product_page.html" class="prev_cart"><div class="cart_vert"><img src="../images/莫吉托.jpg" alt="" title="" /></div></a>
                <div class="cont_cart">
                  <h4>莫吉托</h4>
                  <div class="price">1 x ¥29.00</div>
                </div>
                <a title="close" class="close" href="#"></a>
                <div class="clear"></div>
              </li>
	      <li class="no_border">
		<a href="shopping_cart.html" class="view_cart">查看购物车</a>
		<a href="#" class="checkout">结账</a>
	      </li>
            </ul>
          </li>
        </ul>

        <nav class="private">
          <ul>
            <li><a href="personal.html">个人中心</a></li>
          </ul>
        </nav><!-- .private -->
      </div><!-- .grid_6 -->
    </header><!-- #branding -->
  </div><!-- .container_12 -->

  <section id="main" class="entire_width">
    <div class="container_12">
       <div class="grid_12">
       <h1 class="page_title">购物车</h1>
		<div style="  overflow-y:auto; overflow-x:auto; width:100%; height:500px;">
       <table id="userCart"  class="cart_product" style="margin: 0;">

	      <tr>
		     <th class="images"></th>
		     <th class="bg name">产品名称</th>
		     <th class="edit">规格</th>
		     <th class="bg price">单价</th>
		     <th class="qty">数量</th>
		     <th class="bg subtotal">价格</th>
		     <th class="close"> </th>
	      </tr>

	      <tr>
		     <td colspan="7" class="cart_but">
			    <button class="continue"><span>icon</span>继续购物</button>
			    <button class="update"><span>icon</span>更新购物车</button>
		     </td>
	      </tr>

       </table>
		   </div>
		   <div >

		   </div>
       </div><!-- .grid_12 -->

       <div id="content_bottom">
        <div class="grid_4">
          <div class="bottom_block estimate">
            <h3>估计运费</h3>
            <p>输入您的目的地，以获得运费估算</p>
	    <form>
	      <p>
		     <strong>省:</strong><sup class="surely">*</sup><br/>
		     <select>
			    <option>内蒙古</option>
			    <option>北京</option>
				 <option>河南</option>
				 <option>河北</option>
				 <option>天津</option>
				 <option>山东</option>
				 <option>吉林</option>
				 <option>新疆</option>
				 <option>西藏</option>
				 <option>贵州</option>
				 <option>四川</option>
				 <option>湖南</option>
				 <option>湖北</option>
				 <option>广西</option>
				 <option>广东</option>
				 <option>海南</option>
				 <option>江苏</option>
		     </select>
	      </p>
	      <p>
		     <strong>市:</strong><br/>
		     <select>
			    <option>包头</option>
			    <option>锡林浩特</option>
				 <option>大同</option>
				 <option>石家庄</option>
				 <option>保定</option>
				 <option>呼和浩特</option>
		     </select>
	      </p>
	      <p>
		     <strong>邮政编码</strong><br/>
		     <input type="text" name="" value="" />
	      </p>
	      <input type="submit" id="get_estimate" value="查看费用" />
	    </form>

          </div><!-- .estimate -->
        </div><!-- .grid_4 -->

        <div class="grid_4">
          <div class="bottom_block discount">
            <h3>折扣</h3>
            <p>如果您有优惠券，请输入您的优惠券代码</p>
	    <form>
	      <p>
		     <input type="text" name="" value="" placeholder=""/>
	      </p>
	      <input type="submit" id="apply_coupon" value="查看折扣" />
	    </form>
          </div><!-- .discount -->
        </div><!-- .grid_4 -->

        <div class="grid_4">
          <div class="bottom_block total">
	      <table class="subtotal">
		     <tr>
			    <td>商品总价</td><td class="price totalprice">¥748</td>
		     </tr>
		     <tr class="grand_total">
			    <td>总计</td><td class="price totalprice" >¥748</td>
		     </tr>
	      </table>
	    <button id="pay"  onclick="goShipping()" class="checkout">结账</button>
          </div><!-- .total -->
        </div><!-- .grid_4 -->

        <div class="clear"></div>
      </div><!-- #content_bottom -->

    </div><!-- .container_12 -->
  </section><!-- #main -->
	<footer>
		<div class="copy">
			<p>购买前请确认达到法定饮酒年龄！同福客栈不销售含酒精产品给18岁以下人士</br>Copyright &copy; 2019-同福客栈 版权所有</p>
		</div>

	</footer>
</body>
<script type="text/javascript" src="../js/template/jquery.tmpl.js"></script>
<script id="each"  type="text/x-jquery-tmpl">

    {{each(i,sublist) cartProductVoList}}
 		  <tr>
		     <td class="images"><a href="product_page.html"><img src="http://localhost:8089/upload{{= sublist.productMainImage}}" alt="Product 6"></a></td>
		     <td class="bg name">{{= sublist.productName}}</td>
		     <td class="edit"><a title="Edit" href="#">编辑</a></td>
		     <td class="bg price">{{= sublist.productPrice}}</td>
		     <td class="qty"><input type="text" name="" value="{{= sublist.quantity}}" placeholder="1" /></td>
		     <td class="bg subtotal">{{= sublist.productTotalPrice}}</td>
		     <td class="close"><a title="close" class="close" onclick="remove({{= sublist.productId}})" ></a></td>
	      </tr>
     {{/each}}



</script>
<script type="text/javascript">
	function goShipping() {
		sessionStorage.setItem("totalPrice",$(".totalprice").html());
        window.location.href = "payment.html";
    }
	function remove(pids){
        $.post("http://localhost:8089/portal/cart/delete_product.do",
            {
                productIds:pids,

            },
            function(data,status){
                // alert(data.toString());
                // data={"status":100,"data":null,"msg":"用户名不能为空","success":false}
                // var json = eval("("+data+")"); // data的值是json字符串，这行把字符串转成object
                // var json = eval(data); // data的值是json字符串，这行把字符串转成object
                var resultstatus = data.status;   //没有声明的需要声明这些变量，我之前声明过var ***
                if(resultstatus==0){
                    alert("移除成功!")
                    window.location.reload();
                };
            });
	}
	$(document).ready(function () {
        $.get("http://localhost:8089/portal/cart/list.do",function(data,status){
            var resultstatus = data.status;
            var resuData = data.data;

            if(resultstatus==0){
               show(resuData)
            };
            $(".totalprice").html("¥"+resuData.cartTotalPrice);
        });
        function show(s){

            $("#each").tmpl(s).appendTo('#userCart');
        }
    })
</script>
</html>
